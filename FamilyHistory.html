<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family History</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- KaTeX CSS for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css">
    <style>
        .form-label {
            font-weight: bold;
        }
        .form-container {
            padding: 30px;
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="text-center mb-4">
            <h1>Medicals at the Center</h1>
            <p id="current-date"></p>
        </div>
        <form id="ascvdForm" class="card card-body bg-white shadow-sm form-container">
            <h1 class="mb-4 text-center">Family History</h1>

            <!-- Colorectal Cancer -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="colorectalCancer" class="form-label required">Colorectal Cancer <span class="text-danger">*</span></label>
                    <select id="colorectalCancer" name="colorectalCancer" class="form-select" required data-toggle-target="colorectalCancerType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="colorectalCancerType" style="display: none;">
                    <label for="colorectalAge" class="form-label required">At what age</label>
                    <input type="number" id="colorectalAge" name="colorectalAge" class="form-control">
                </div>
            </div>

            <!-- Breast Cancer -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="breastCancer" class="form-label required">Breast Cancer <span class="text-danger">*</span></label>
                    <select id="breastCancer" name="breastCancer" class="form-select" required data-toggle-target="breastCancerType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="breastCancerType" style="display: none;">
                    <label for="breastSiblings" class="form-label required">How many siblings</label>
                    <input type="number" id="breastSiblings" name="breastSiblings" class="form-control">
                    <label for="youngestSiblingAge" class="form-label required">Age of youngest sibling</label>
                    <input type="number" id="youngestSiblingAge" name="youngestSiblingAge" class="form-control">
                </div>
            </div>

            <!-- Lung Cancer -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="lungCancer" class="form-label required">Lung Cancer <span class="text-danger">*</span></label>
                    <select id="lungCancer" name="lungCancer" class="form-select" required data-toggle-target="lungCancerType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="lungCancerType" style="display: none;">
                    <label for="lungCancerAge" class="form-label required">At what age</label>
                    <input type="number" id="lungCancerAge" name="lungCancerAge" class="form-control">
                </div>
            </div>

            <!-- Prostate Cancer -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="prostateCancer" class="form-label required">Prostate Cancer <span class="text-danger">*</span></label>
                    <select id="prostateCancer" name="prostateCancer" class="form-select" required data-toggle-target="prostateCancerType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="prostateCancerType" style="display: none;">
                    <label for="prostateSiblings" class="form-label required">How many relatives (Father and/or Brother)</label>
                    <input type="number" id="prostateSiblings" name="prostateSiblings" class="form-control">
                    <label for="youngestRelativeAge" class="form-label required">Age of youngest relatives</label>
                    <input type="number" id="youngestRelativeAge" name="youngestRelativeAge" class="form-control">
                </div>
            </div>

            <!-- Abdominal Aortic Aneurysm -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="abdominalAneurysm" class="form-label required">Abdominal Aortic Aneurysm <span class="text-danger">*</span></label>
                    <select id="abdominalAneurysm" name="abdominalAneurysm" class="form-select" required data-toggle-target="abdominalAneurysmType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="abdominalAneurysmType" style="display: none;">
                    <label for="aneurysmAge" class="form-label required">At what age</label>
                    <input type="number" id="aneurysmAge" name="aneurysmAge" class="form-control">
                </div>
            </div>

            <!-- Coronary Artery Disease -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="coronaryDisease" class="form-label required">Coronary Artery Disease <span class="text-danger">*</span></label>
                    <select id="coronaryDisease" name="coronaryDisease" class="form-select" required data-toggle-target="coronaryDiseaseType">
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
                <div class="col-md-6" id="coronaryDiseaseType" style="display: none;">
                    <label for="coronaryDiseaseAge" class="form-label required">Select Which Relative</label>
                    <select id="coronaryDiseaseAge" name="coronaryDiseaseAge" class="form-select">
                        <option value="select">Select...</option>
                        <option value="men">Men < 55</option>
                        <option value="women">Women < 65</option>
                    </select>
                </div>
            </div>

            <!-- DM Type II -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="dm" class="form-label required">DM Type II <span class="text-danger">*</span></label>
                    <select id="dm" name="dm" class="form-select" required>
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
            </div>

            <!-- Hypertension -->
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="hypertension" class="form-label required">Hypertension <span class="text-danger">*</span></label>
                    <select id="hypertension" name="hypertension" class="form-select" required>
                        <option value="select">Select...</option>
                        <option value="no">No</option>
                        <option value="yes">Yes</option>
                    </select>
                </div>
            </div>

            <!-- Others -->
            <div id="otherFieldsContainer" class="row g-3 mb-3">
                <div class="col-md-6">
                    <label for="other0" class="form-label required">Other <span class="text-danger">*</span></label>
                    <input type="text" id="other0" name="other[]" class="form-control" required>
                </div>
            </div>
            <div class="row g-3 mb-3">
                <div class="col-md-6">
                    <button type="button" class="btn btn-secondary" onclick="addOtherField()">Add Another</button>
                </div>
            </div>
            
            <div class="text-center">
                <a href="MedicalHistory.html" class="btn btn-primary mt-3" role="button">Next</a>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            document.getElementById('current-date').textContent = today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            document.querySelectorAll('[data-toggle-target]').forEach(function(selectElement) {
                selectElement.addEventListener('change', function() {
                    const targetId = this.getAttribute('data-toggle-target');
                    const targetElement = document.getElementById(targetId);
                    targetElement.style.display = (this.value === 'yes') ? 'block' : 'none';
                });
            });
        });

        function addOtherField() {
            const container = document.getElementById('otherFieldsContainer');
            const index = container.children.length / 2; // Calculate the index for new field
            const newField = document.createElement('div');
            newField.className = 'col-md-6';
            newField.innerHTML = `
                <label for="other${index}" class="form-label required">Other <span class="text-danger">*</span></label>
                <input type="text" id="other${index}" name="other[]" class="form-control" required>
            `;
            container.appendChild(newField);
        }
    </script>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- KaTeX JS for Math Rendering -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js"></script>
</body>
</html>
