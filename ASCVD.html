<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASCVD Risk Assessment Form</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Add KaTeX CSS for Math Rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css">
</head>
<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4">ASCVD Risk Assessment Form</h1>
        <form id="ascvdForm" class="card card-body bg-white">
            <div class="row g-3">
                <!-- Age -->
                <div class="col-md-6">
                    <label for="age" class="form-label required"> Age </label>
                    <input type="number" name="age" id="age" class="form-control" required min="20" max="79">
                </div>
                <!-- Sex -->
                <div class="col-md-6">
                    <label for="sex" name="sex" class="form-label required">Sex </label>
                    <select id="sex" name="sex" class="form-select" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <!-- Race -->
                <div class="col-md-6">
                    <label for="race" class="form-label required">Race  </label>
                    <select id="race" name="race" class="form-select" required>
                        <option value="white">White</option>
                        <option value="africanAmerican">African American</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <!-- Systolic BP -->
                <div class="col-md-6">
                    <label for="systolicBP" class="form-label required">Systolic Blood Pressure (mm Hg)  </label>
                    <input type="number" name="sbp" id="systolicBP" class="form-control" required min="90" max="200">
                </div>
                <!-- Diastolic BP -->
                <div class="col-md-6">
                    <label for="diastolicBP" class="form-label required">Diastolic Blood Pressure (mm Hg)  </label>
                    <input type="number" id="diastolicBP" name="dbp" class="form-control" required min="60" max="130">
                </div>
                <!-- Total Cholesterol -->
                <div class="col-md-6">
                    <label for="totalCholesterol" class="form-label required">Total Cholesterol (mg/dL)  </label>
                    <input type="number" id="totalCholesterol" name="chol" class="form-control" required min="130" max="320">
                </div>
                <!-- HDL Cholesterol -->
                <div class="col-md-6">
                    <label for="hdlCholesterol" class="form-label required">HDL Cholesterol (mg/dL)  </label>
                    <input type="number" id="hdlCholesterol" name="hdl" class="form-control" required min="20" max="100">
                </div>
                
                <!-- LDL Cholesterol -->
                <div class="col-md-6">
                    <label for="ldlCholesterol" class="form-label required">LDL Cholesterol (mg/dL)</label>
                    <input type="number" id="ldlCholesterol" name="ldl" class="form-control" min="30" max="300">
                </div>
                <!-- Diabetes -->
                <div class="col-md-6">
                    <label for="diabetes" class="form-label required">History of Diabetes?  </label>
                    <select id="diabetes" name="diabetes" class="form-select" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                <!-- Smoker -->
                <div class="col-md-6">
                  <label for="smoker" class="form-label required">Smoker? </label>
                  <select id="smoker" name="smoke" class="form-select" required onchange="toggleQuitSmokingField()">
                    <option value="never">Never</option>
                      <option value="current">Current</option>
                      <option value="former">Former</option>
                      
                  </select>
              </div>
              <!-- Quit Smoking Group -->
              <div class="col-md-6" id="quitSmokingGroup" style="display: none;">
                  <label for="quitSmoking" class="form-label required">How long ago did patient quit smoking? </label>
                  <select id="quitSmoking" name="quit" class="form-select">
                      <option value="">Select</option>
                      <option value="unknown">Unknown</option>
                      <option value="lessThan6Months">Less than 6 months ago</option>
                      <option value="6MonthsTo1_5Years">6 months-1.5 years ago</option>
                      <option value="1_5To2_5Years">1.5-2.5 years ago</option>
                      <option value="2_5To3_5Years">2.5-3.5 years ago</option>
                      <option value="3_5To5Years">3.5-5 years ago</option>
                      <option value="moreThan5Years">More than 5 years ago</option>
                  </select>
              </div>
                <!-- Hypertension Treatment -->
                <div class="col-md-6">
                    <label for="hypertensionTreatment"  class="form-label required">On Hypertension Treatment?  </label>
                    <select id="hypertensionTreatment" name="hypertension" class="form-select" required>
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
                <!-- Aspirin Therapy -->
                <div class="col-md-6">
                    <label for="aspirinTherapy" the="form-label required">On Aspirin Therapy?</label>
                    <select id="aspirinTherapy" name="aspirin" class="form-select">
                        <option value="yes">Yes</option>
                        <option value="no">No</option>
                    </select>
                </div>
            </div>
            <button type="submit" name="submit" class="btn btn-primary mt-3">Calculate ASCVD Risk</button>
        </form>
     <!-- New Section: Formula Explanation -->
     <section class="my-5">
      <h2>Understanding the ASCVD Risk Estimation Formula</h2>
      <p>Here’s a simplified version of the formula for estimating the 10-year risk of atherosclerotic cardiovascular disease (ASCVD). This formula is used to guide clinical decisions and is recommended by the American College of Cardiology:</p>
      <div class="card card-body bg-light">
          <h3>Formula for Non-Hispanic Whites</h3>
          <p>For non-Hispanic white men:</p>
          <div id="formula-men" class="katex"></div>
          <p>For non-Hispanic white women:</p>
          <div id="formula-women" class="katex"></div>
          <p>Where:</p>
          <ul>
              <li><strong>β (beta)</strong> represents the coefficients for each risk factor.</li>
              <li><strong>Factors</strong> is the sum of variables including age, total cholesterol, HDL cholesterol, systolic blood pressure, treatment for hypertension, diabetes status, and smoking status.</li>
              <li><strong>Mean</strong> is the mean of the natural logarithm of risk factors for the specific population.</li>
          </ul>
      </div>
  </section>
</div>
     <!-- Bootstrap 5 JS Bundle -->
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
     <!-- KaTeX JS for Math Rendering -->
     <script src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js"></script>
     <script>
         // Rendering Math Formulas with KaTeX
         katex.render("ASCVD\\, Risk = 1 - 0.8990^{\\exp(\\beta \\times \\text{Factors} - \\text{Mean})}", document.getElementById('formula-men'));
         katex.render("ASCVD\\, Risk = 1 - 0.9533^{\\exp(\\beta \\times \\text{Factors} - \\text{Mean})}", document.getElementById('formula-women'));
 
         // Existing JS for Form
         function toggleQuitSmokingField() {
             var smokerStatus = document.getElementById("smoker").value;
             var quitSmokingGroup = document.getElementById("quitSmokingGroup");
             if (smokerStatus === "former") {
                 quitSmokingGroup.style.display = "block"; // Show the quit smoking field
             } else {
                 quitSmokingGroup.style.display = "none"; // Hide the quit smoking field
             }
         }
 
         // Call this function on page load to set the initial state
         document.addEventListener('DOMContentLoaded', function() {
             toggleQuitSmokingField();
         });
     </script>
 </body>
 </html>
